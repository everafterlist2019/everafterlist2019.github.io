{"version":3,"file":"ng-stack-contenteditable.umd.js.map","sources":["ng://@ng-stack/contenteditable/lib/contenteditable.directive.ts","ng://@ng-stack/contenteditable/lib/contenteditable.module.ts"],"sourcesContent":["import { Directive, ElementRef, Renderer2, HostListener, HostBinding, forwardRef, Input } from '@angular/core';\n\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\n@Directive({\n  // tslint:disable-next-line:directive-selector\n  selector: '[contenteditable]',\n  providers: [{ provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => ContenteditableDirective), multi: true }],\n})\nexport class ContenteditableDirective implements ControlValueAccessor {\n  @Input() propValueAccessor = 'textContent';\n  @HostBinding('attr.contenteditable') @Input() contenteditable = true;\n\n  private onChange: (value: string) => void;\n  private onTouched: () => void;\n  private removeDisabledState: () => void;\n\n  constructor(private elementRef: ElementRef, private renderer: Renderer2) {}\n\n  @HostListener('input')\n  callOnChange() {\n    if (typeof this.onChange == 'function') {\n      this.onChange(this.elementRef.nativeElement[this.propValueAccessor]);\n    }\n  }\n\n  @HostListener('blur')\n  callOnTouched() {\n    if (typeof this.onTouched == 'function') {\n      this.onTouched();\n    }\n  }\n\n  /**\n   * Writes a new value to the element.\n   * This method will be called by the forms API to write\n   * to the view when programmatic (model -> view) changes are requested.\n   *\n   * See: [ControlValueAccessor](https://angular.io/api/forms/ControlValueAccessor#members)\n   */\n  writeValue(value: any): void {\n    const normalizedValue = value == null ? '' : value;\n    this.renderer.setProperty(this.elementRef.nativeElement, this.propValueAccessor, normalizedValue);\n  }\n\n  /**\n   * Registers a callback function that should be called when\n   * the control's value changes in the UI.\n   *\n   * This is called by the forms API on initialization so it can update\n   * the form model when values propagate from the view (view -> model).\n   */\n  registerOnChange(fn: () => void): void {\n    this.onChange = fn;\n  }\n\n  /**\n   * Registers a callback function that should be called when the control receives a blur event.\n   * This is called by the forms API on initialization so it can update the form model on blur.\n   */\n  registerOnTouched(fn: () => void): void {\n    this.onTouched = fn;\n  }\n\n  /**\n   * This function is called by the forms API when the control status changes to or from \"DISABLED\".\n   * Depending on the value, it should enable or disable the appropriate DOM element.\n   */\n  setDisabledState(isDisabled: boolean): void {\n    if (isDisabled) {\n      this.renderer.setAttribute(this.elementRef.nativeElement, 'disabled', 'true');\n      this.removeDisabledState = this.renderer.listen(\n        this.elementRef.nativeElement,\n        'keydown',\n        this.listenerDisabledState\n      );\n    } else {\n      if (this.removeDisabledState) {\n        this.renderer.removeAttribute(this.elementRef.nativeElement, 'disabled');\n        this.removeDisabledState();\n      }\n    }\n  }\n\n  private listenerDisabledState(e: KeyboardEvent) {\n    e.preventDefault();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { ContenteditableDirective } from './contenteditable.directive';\n\n@NgModule({\n  declarations: [ContenteditableDirective],\n  exports: [ContenteditableDirective],\n})\nexport class ContenteditableModule {}\n"],"names":["Directive","NG_VALUE_ACCESSOR","forwardRef","ElementRef","Renderer2","Input","HostBinding","HostListener","NgModule"],"mappings":";;;;;;;;;;AAAA;QAiBE,kCAAoB,UAAsB,EAAU,QAAmB;YAAnD,eAAU,GAAV,UAAU,CAAY;YAAU,aAAQ,GAAR,QAAQ,CAAW;YAP9D,sBAAiB,GAAG,aAAa,CAAC;YACG,oBAAe,GAAG,IAAI,CAAC;SAMM;;;;QAG3E,+CAAY;;;YADZ;gBAEE,IAAI,OAAO,IAAI,CAAC,QAAQ,IAAI,UAAU,EAAE;oBACtC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC;iBACtE;aACF;;;;QAGD,gDAAa;;;YADb;gBAEE,IAAI,OAAO,IAAI,CAAC,SAAS,IAAI,UAAU,EAAE;oBACvC,IAAI,CAAC,SAAS,EAAE,CAAC;iBAClB;aACF;;;;;;;;;;;;;;;;;QASD,6CAAU;;;;;;;;;YAAV,UAAW,KAAU;;oBACb,eAAe,GAAG,KAAK,IAAI,IAAI,GAAG,EAAE,GAAG,KAAK;gBAClD,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,IAAI,CAAC,iBAAiB,EAAE,eAAe,CAAC,CAAC;aACnG;;;;;;;;;;;;;;;;;QASD,mDAAgB;;;;;;;;;YAAhB,UAAiB,EAAc;gBAC7B,IAAI,CAAC,QAAQ,GAAG,EAAE,CAAC;aACpB;;;;;;;;;;;QAMD,oDAAiB;;;;;;YAAjB,UAAkB,EAAc;gBAC9B,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;aACrB;;;;;;;;;;;QAMD,mDAAgB;;;;;;YAAhB,UAAiB,UAAmB;gBAClC,IAAI,UAAU,EAAE;oBACd,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,UAAU,EAAE,MAAM,CAAC,CAAC;oBAC9E,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,QAAQ,CAAC,MAAM,CAC7C,IAAI,CAAC,UAAU,CAAC,aAAa,EAC7B,SAAS,EACT,IAAI,CAAC,qBAAqB,CAC3B,CAAC;iBACH;qBAAM;oBACL,IAAI,IAAI,CAAC,mBAAmB,EAAE;wBAC5B,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,UAAU,CAAC,CAAC;wBACzE,IAAI,CAAC,mBAAmB,EAAE,CAAC;qBAC5B;iBACF;aACF;;;;;;QAEO,wDAAqB;;;;;YAA7B,UAA8B,CAAgB;gBAC5C,CAAC,CAAC,cAAc,EAAE,CAAC;aACpB;;oBAlFFA,cAAS,SAAC;;wBAET,QAAQ,EAAE,mBAAmB;wBAC7B,SAAS,EAAE,CAAC,EAAE,OAAO,EAAEC,uBAAiB,EAAE,WAAW,EAAEC,eAAU;;2CAAC,cAAM,OAAA,wBAAwB,GAAA,EAAC,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;qBAClH;;;;;wBARmBC,eAAU;wBAAEC,cAAS;;;;wCAUtCC,UAAK;sCACLC,gBAAW,SAAC,sBAAsB,cAAGD,UAAK;mCAQ1CE,iBAAY,SAAC,OAAO;oCAOpBA,iBAAY,SAAC,MAAM;;QA6DtB,+BAAC;KAnFD;;;;;;ACJA;QAGA;SAIqC;;oBAJpCC,aAAQ,SAAC;wBACR,YAAY,EAAE,CAAC,wBAAwB,CAAC;wBACxC,OAAO,EAAE,CAAC,wBAAwB,CAAC;qBACpC;;QACmC,4BAAC;KAJrC;;;;;;;;;;;;;;;;;;;;;;;"}
